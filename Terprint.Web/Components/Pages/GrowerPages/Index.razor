@page "/growers"
@using Microsoft.AspNetCore.Components.QuickGrid
@inject Terprint.Web.Data.TerprintWebContext DB
@using Terprint.Web.Models
@inject common.AppState.StateContainer.Grower asGrower
@rendermode InteractiveServer
 

<Grid TItem="Grower"
      Class="table table-hover table-bordered table-striped"
      DataProvider="GrowerDataProvider"
      AllowFiltering="true"
      AllowPaging="true"
      PageSize="20"
      AllowSorting="true"
      AllowSelection="true"
      Responsive="true">
    <GridColumns>
        <GridColumn TItem="Grower" HeaderText="GrowerName" PropertyName="Name" SortKeySelector="item => item.Name">
            @context.Name
        </GridColumn> 
        <GridColumn TItem="Grower" HeaderText="created" PropertyName="created" SortKeySelector="item => item.created">
            @context.created
        </GridColumn>
        <GridColumn TItem="Grower" HeaderText="createdby" PropertyName="createdby" SortKeySelector="item => item.createdby">
            @context.createdby
        </GridColumn>

    </GridColumns>

</Grid>
@code {

    private IEnumerable<Grower> Growers;
    private HashSet<Grower> selectedGrowers = new();

    protected override void OnInitialized()
    {
        Growers = asGrower.Growers.OrderByDescending(t => t.created).ToList();
    }

    private async Task<GridDataProviderResult<Grower>> GrowerDataProvider(GridDataProviderRequest<Grower> request)
    {
        return await Task.FromResult(request.ApplyTo(Growers));
    }

}