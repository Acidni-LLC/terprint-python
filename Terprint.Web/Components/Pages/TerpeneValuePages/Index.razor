@page "/terpenevalues"
@using Microsoft.AspNetCore.Components.QuickGrid
@inject Terprint.Web.Data.TerprintWebContext DB
@using Terprint.Web.Models
@rendermode InteractiveServer

<PageTitle>Terpene Values</PageTitle>

<h1>Terpene Values</h1>

<p>
    <a href="terpenevalues/create">Create New</a>
    <a href="terpenevalues/paste">Paste Values</a>
</p>


<Grid TItem="TerpeneValue"
      Class="table table-hover table-bordered table-striped"
      DataProvider="TerpeneValueDataProvider"
      AllowFiltering="true"
      AllowPaging="true"
      PageSize="25"
      AllowSorting="true"
      AllowSelection="true"
      SelectionMode="GridSelectionMode.Multiple"
      SelectedItemsChanged="OnSelectedItemsChanged"
      Responsive="true">
    <GridColumns>
        <GridColumn TItem="TerpeneValue" HeaderText="Value" PropertyName="Value" SortKeySelector="item => item.Value">
            @context.Value
        </GridColumn>
        <GridColumn TItem="TerpeneValue" HeaderText="TerpeneName" PropertyName="TerpeneName" SortKeySelector="item => item.TerpeneName">
            @context.TerpeneName
        </GridColumn>
        <GridColumn TItem="TerpeneValue" HeaderText="created" PropertyName="created" SortKeySelector="item => item.created">
            @context.created
        </GridColumn>
        <GridColumn TItem="TerpeneValue" HeaderText="BatchID" PropertyName="BatchID" SortKeySelector="item => item.BatchID">
            @context.BatchID
        </GridColumn>
    </GridColumns>

</Grid>

@code {


    private IEnumerable<TerpeneValue> TerpeneValues;
    private HashSet<TerpeneValue> selectedTerpeneValues = new();

    protected override void OnInitialized()
    {
        TerpeneValues = DB.TerpeneValues.ToList();
    }

    private async Task<GridDataProviderResult<TerpeneValue>> TerpeneValueDataProvider(GridDataProviderRequest<TerpeneValue> request)
    {
        return await Task.FromResult(request.ApplyTo(TerpeneValues));
    }
    private Task OnSelectedItemsChanged(HashSet<TerpeneValue> TerpeneValues)
    {
        selectedTerpeneValues = TerpeneValues is not null && TerpeneValues.Any() ? TerpeneValues : new();
        return Task.CompletedTask;
    }
}